# ===============================
# Kairos Backend - .env.sample
# Copia este archivo a .env y completa valores.
# En Render, define estas variables en el panel de Environment.
# ===============================

# --- App ---
NODE_ENV=development
PORT=3002
JWT_SECRET=CAMBIA_ESTE_SECRETO

# --- CORS ---
# Frontend público permitido
WEB_ORIGIN=http://localhost:3000
# Para pruebas con túneles (opcional)
NGROK_ORIGIN=
DEVTUNNELS_ORIGIN=

# --- MySQL (elige una de dos formas) ---
# Opción A: cadena completa (PlanetScale/Railway/Proveedores serverless)
# Ej: mysql://usuario:password@host:3306/kairos
DATABASE_URL=mysql://2yy93Afe1N1zws3.root:<PASSWORD>@gateway01.us-east-1.prod.aws.tidbcloud.com:4000/kairos
# Si el proveedor exige SSL, habilita:
DB_SSL=true

# Opción B: parámetros locales
DB_HOST=localhost
DB_USER=root
DB_PASS=CodeEsteban
DB_NAME=kairos

# --- Redis sesiones/ratelimit (Upstash u otro) ---
# Ej: rediss://default:password@us1-exemplo.upstash.io:12345
REDIS_URL=
# Alternativo soportado
UPSTASH_REDIS_URL=

# --- Email (SendGrid) ---
SENDGRID_API_KEY=
MAIL_FROM=no-reply@tudominio.com

# --- SMS (opcional – Twilio Trial) ---
TWILIO_ACCOUNT_SID=
TWILIO_AUTH_TOKEN=
TWILIO_PHONE_NUMBER=

# --- CAPTCHA (opcional) ---
CAPTCHA_ENABLED=false
CAPTCHA_PROVIDER=recaptcha
CAPTCHA_SECRET=
# Activar por endpoint (si tu middleware lo usa)
CAPTCHA_ON_LOGIN=true
CAPTCHA_ON_REGISTER=true

# --- Expiraciones ---
PENDING_EXPIRES_MINUTES_SMS=5
PENDING_EXPIRES_MINUTES_EMAIL=15
RECOVERY_EXPIRES_MINUTES_SMS=5
RECOVERY_EXPIRES_MINUTES_EMAIL=15

# --- Admin/Health (opcional) ---
ADMIN_HEALTH_KEY=
# Lista separada por comas si quieres permitir ciertas IPs
ADMIN_HEALTH_IPS=
ADMIN_HEALTH_RATE_LIMIT_WINDOW_SECONDS=60
ADMIN_HEALTH_RATE_LIMIT_MAX=30

# --- Cookies/Seguridad extra (opcional) ---
# Habilitar CSP estricto en API (puede romper herramientas si no se configura bien)
ENABLE_API_CSP=false
# Cookies cross-site si usas ngrok/devtunnels
CROSS_SITE_COOKIES=false
# Forzar SameSite (lax/none/strict). Si CROSS_SITE_COOKIES=true, usa none.
SAMESITE=lax
